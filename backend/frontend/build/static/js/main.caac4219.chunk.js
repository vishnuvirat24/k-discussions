(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(21),c=n.n(a),s=(n(77),n(78),n(31)),i=n(65),o=n(66),l=n(72),u="DISCUSSION_LIST_REQUEST",d="DISCUSSION_LIST_SUCCESS",j="DISCUSSION_LIST_FAIL",p="DISCUSSION_CREATE_REQUEST",b="DISCUSSION_CREATE_SUCCESS",h="DISCUSSION_CREATE_FAIL",O="DISCUSSION_CREATE_RESET",x="D_LIST_REQUEST",f="D_LIST_SUCCESS",v="D_LIST_FAIL",g="D_LIST_RESET",y="D_REPLY_REQUEST",m="D_REPLY_SUCCESS",S="D_REPLY_FAIL",I="D_REPLY_RESET",E="USER_LOGIN_REQUEST",L="USER_LOGIN_SUCCESS",C="USER_LOGIN_FAIL",_="USER_LOGIN_LOGOUT",w="USER_REGISTER_REQUEST",R="USER_REGISTER_SUCCESS",T="USER_REGISTER_FAIL",U=Object(s.combineReducers)({discussionList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{discussions:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{loading:!0,discussions:[]};case d:return{loading:!1,discussions:t.payload};case j:return{loading:!1,error:t.payload};default:return e}},discussionCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)({loading:!0},e);case b:return{loading:!1,success:!0};case h:return{loading:!1,error:t.payload};case O:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{loading:!0};case R:return{loading:!1,success:!0};case T:return{loading:!1,error:t.payload};case _:return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{loading:!0};case L:return{loading:!1,success:!0,userInfo:t.payload};case C:return{loading:!1,error:t.payload};case _:return{};default:return e}},dList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{d:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{loading:!0};case f:return{loading:!1,success:!0,d:t.payload};case v:return{loading:!1,error:t.payload};case g:return{};default:return e}},dReply:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{loading:!0};case m:return{loading:!1,success:!0};case S:return{loading:!1,error:t.payload};case I:return{};default:return e}}}),N=[i.a],k={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},D=Object(s.createStore)(U,k,Object(o.composeWithDevTools)(s.applyMiddleware.apply(void 0,N))),G=n(7),A=n(112),F=n(15),P=n(8),B=n(113),Q=n(68),J=n(2);var Y=function(){return Object(J.jsx)("footer",{children:Object(J.jsx)(A.a,{children:Object(J.jsx)(B.a,{children:Object(J.jsx)(Q.a,{className:"text-center py-3",children:"Copyright \xa9 K-Discussions"})})})})},H=n(118),q=n(120),K=n(116),W=n(52),z=n(13),M=n.n(z),V=n(27),X=n(25),Z=n.n(X);var $=function(){var e=Object(G.c)((function(e){return e.userLogin})).userInfo,t=Object(G.b)();return Object(J.jsx)("header",{children:Object(J.jsx)(H.a,{bg:"light",expand:"lg",collapseOnSelect:!0,children:Object(J.jsxs)(A.a,{children:[Object(J.jsx)(W.LinkContainer,{to:"/",children:Object(J.jsx)(H.a.Brand,{children:"K-Discussions"})}),Object(J.jsx)(H.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(J.jsx)(H.a.Collapse,{id:"basic-navbar-nav",children:Object(J.jsx)(q.a,{className:"mr-auto",children:e?Object(J.jsx)(K.a,{title:e.username,id:"username",children:Object(J.jsx)(K.a.Item,{onClick:function(){t((function(e){localStorage.removeItem("userInfo"),e({type:_})}))},children:"Logout"})}):Object(J.jsx)(W.LinkContainer,{to:"/login",children:Object(J.jsxs)(q.a.Link,{children:[Object(J.jsx)("i",{className:"fas fa-user"}),"Login"]})})})})]})})})},ee=n(71),te=n(122),ne=n(121),re=n(114);var ae=function(e){var t=e.d;return Object(J.jsxs)(ne.a,{className:"my-3",children:[Object(J.jsxs)(ne.a.Header,{style:{color:"white"},children:[Object(J.jsx)(re.a,{pill:!0,variant:"success",children:Object(J.jsxs)("h6",{children:["Author: ",t.name]})})," "]}),Object(J.jsxs)(ne.a.Body,{children:[Object(J.jsxs)(ne.a.Title,{children:["Topic: ",Object(J.jsx)(re.a,{variant:"dark",children:t.title})]}),Object(J.jsx)(ne.a.Text,{style:{color:"white"},children:t.description}),Object(J.jsx)(F.Link,{to:"/reply/".concat(t._id),className:"btn btn-light my-3",children:"See Replies"})]})]})},ce=n(115);var se=function(){return Object(J.jsx)(ce.a,{animation:"border",role:"status",style:{height:"100px",width:"100px",margin:"auto",display:"block"},children:Object(J.jsx)("span",{className:"sr-only",children:"Loading..."})})};var ie=function(e){var t=e.history,n=Object(G.b)(),a=Object(G.c)((function(e){return e.discussionList})),c=(a.error,a.loading),s=a.discussions,i=Object(G.c)((function(e){return e.userLogin})).userInfo;return Object(r.useEffect)((function(){n(function(){var e=Object(V.a)(M.a.mark((function e(t){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:u}),e.next=4,Z.a.get("/api/discussions");case 4:n=e.sent,r=n.data,t({type:d,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:j,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[n]),Object(J.jsxs)("div",{children:[Object(J.jsx)("h1",{children:"Discussion Forum"}),Object(J.jsx)(B.a,{className:"text-center",children:Object(J.jsx)(Q.a,{children:Object(J.jsx)(ee.a,{variant:"light",size:"lg",onClick:function(){i?t.push("/create"):t.push("/login")},children:"CREATE A NEW DISCUSSION"})})}),c?Object(J.jsx)(se,{}):Object(J.jsx)(te.a,{variant:"flush",children:s.map((function(e){return Object(J.jsx)(te.a.Item,{children:Object(J.jsx)(ae,{d:e})})}))})]})},oe=n(18),le=n(117),ue=n(119);var de=function(e){var t=e.variant,n=e.children;return Object(J.jsx)(ue.a,{variant:t,children:n})};var je=function(e){var t=e.match,n=Object(r.useState)(""),a=Object(oe.a)(n,2),c=a[0],s=a[1],i=Object(G.b)(),o=Object(G.c)((function(e){return e.dList})),l=o.success,u=o.d,d=Object(G.c)((function(e){return e.dReply})).success,j=Object(G.c)((function(e){return e.userLogin})).userInfo;return Object(r.useEffect)((function(){var e;d&&(s(""),i({type:I})),i((e=t.params.id,function(){var t=Object(V.a)(M.a.mark((function t(n){var r,a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:x}),t.next=4,Z.a.get("/api/discussion/".concat(e));case 4:r=t.sent,a=r.data,n({type:f,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:v,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[i,t,d]),Object(J.jsxs)("div",{children:[Object(J.jsx)(F.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),l?Object(J.jsxs)("div",{children:[Object(J.jsxs)(ne.a,{className:"my-3",children:[Object(J.jsxs)(ne.a.Header,{style:{color:"white"},children:[Object(J.jsx)(re.a,{pill:!0,variant:"success",children:Object(J.jsxs)("h6",{children:["Author: ",u.name]})})," "]}),Object(J.jsxs)(ne.a.Body,{children:[Object(J.jsxs)(ne.a.Title,{children:["Topic: ",Object(J.jsx)(re.a,{variant:"dark",children:u.title})]}),Object(J.jsx)(ne.a.Text,{style:{color:"white"},children:u.description})]})]}),Object(J.jsxs)(te.a,{variant:"flush",children:[Object(J.jsx)("h1",{children:"Replies"}),u.replies.map((function(e){return Object(J.jsx)("div",{class:"card p-3",children:Object(J.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:Object(J.jsxs)("div",{class:"user d-flex flex-row align-items-center",children:[Object(J.jsxs)("span",{children:[Object(J.jsx)("small",{class:"font-weight-bold text-primary",children:e.replier})," ",Object(J.jsx)("small",{class:"font-weight-bold",children:e.reply})]})," "]})})})}))]}),j?Object(J.jsxs)(le.a,{onSubmit:function(e){var n,r,a;e.preventDefault(),i((n=t.params.id,r=c,a=j.username,function(){var e=Object(V.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:y}),e.next=4,Z.a.post("/api/discussion/".concat(n),{reply:r,replier:a});case 4:t({type:m}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:S,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(J.jsxs)(le.a.Group,{controlId:"reply",children:[Object(J.jsx)(le.a.Label,{children:"Shoot a reply"}),Object(J.jsx)(le.a.Control,{as:"textarea",row:"5",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(J.jsx)(ee.a,{type:"submit",variant:"primary",children:"Submit"})]}):Object(J.jsxs)(de,{variant:"info",children:["Please ",Object(J.jsx)(F.Link,{to:"/login",children:"login"})," to reply"]})]}):Object(J.jsx)(se,{})]})};var pe=function(e){var t=e.children;return Object(J.jsx)(A.a,{children:Object(J.jsx)(B.a,{className:"justify-content-md-center",children:Object(J.jsx)(Q.a,{xs:12,md:6,children:t})})})};var be=function(e){var t=e.history,n=Object(r.useState)(""),a=Object(oe.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(oe.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),j=Object(oe.a)(d,2),x=j[0],f=j[1],v=Object(G.b)(),g=Object(G.c)((function(e){return e.discussionCreate})),y=(g.loading,g.error,g.success),m=Object(G.c)((function(e){return e.userLogin})).userInfo;return Object(r.useEffect)((function(){v({type:O}),y&&t.push("/")}),[t,y,v,m]),Object(J.jsx)("div",{children:Object(J.jsxs)(pe,{children:[Object(J.jsx)("h1",{children:"Create A Discussion"}),Object(J.jsxs)(le.a,{onSubmit:function(e){e.preventDefault(),m?v(function(e,t,n){return function(){var r=Object(V.a)(M.a.mark((function r(a){return M.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:p}),r.next=4,Z.a.post("/api/discussions",{name:e,title:t,description:n});case 4:a({type:b}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),a({type:h,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}(c,l,x)):t.push("/login")},children:[Object(J.jsxs)(le.a.Group,{controlId:"name",children:[Object(J.jsx)(le.a.Label,{children:"Name"}),Object(J.jsx)(le.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(J.jsxs)(le.a.Group,{controlId:"title",children:[Object(J.jsx)(le.a.Label,{children:"Title"}),Object(J.jsx)(le.a.Control,{type:"title",placeholder:"Enter title",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(J.jsxs)(le.a.Group,{controlId:"description",children:[Object(J.jsx)(le.a.Label,{children:"Description"}),Object(J.jsx)(le.a.Control,{as:"textarea",row:5,value:x,onChange:function(e){return f(e.target.value)}})]}),Object(J.jsx)(ee.a,{type:"submit",variant:"primary",children:"Create"})]})]})})};var he=function(e){var t=e.location,n=e.history,a=Object(r.useState)(""),c=Object(oe.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),l=Object(oe.a)(o,2),u=l[0],d=l[1],j=Object(G.b)(),p=t.search?t.search.split("=")[1]:"/",b=Object(G.c)((function(e){return e.userLogin})),h=(b.error,b.loading,b.userInfo);return Object(r.useEffect)((function(){h&&n.push(p)}),[n,h,p]),Object(J.jsxs)(pe,{children:[Object(J.jsx)("h1",{children:"Login In"}),Object(J.jsxs)(le.a,{onSubmit:function(e){var t,n;e.preventDefault(),j((t=s,n=u,function(){var e=Object(V.a)(M.a.mark((function e(r){var a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:E}),e.next=4,Z.a.post("/api/login",{username:t,password:n});case 4:a=e.sent,c=a.data,r({type:L,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r({type:C,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(J.jsxs)(le.a.Group,{controlId:"username",children:[Object(J.jsx)(le.a.Label,{children:"Username"}),Object(J.jsx)(le.a.Control,{type:"username",placeholder:"Enter name",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(J.jsxs)(le.a.Group,{controlId:"password",children:[Object(J.jsx)(le.a.Label,{children:"Password"}),Object(J.jsx)(le.a.Control,{type:"password",placeholder:"Enter Password",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(J.jsx)(ee.a,{type:"submit",variant:"primary",children:"Login In"})]}),Object(J.jsx)(B.a,{className:"py-3",children:Object(J.jsxs)(Q.a,{children:["New User? ",Object(J.jsx)(F.Link,{to:p?"/register?redirect=".concat(p):"/register",children:"Register"})]})})]})};var Oe=function(e){e.location;var t=e.history,n=Object(r.useState)(""),a=Object(oe.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(oe.a)(i,2),l=o[0],u=o[1],d=Object(G.b)(),j=Object(G.c)((function(e){return e.userRegister})),p=(j.error,j.loading,j.success);return Object(r.useEffect)((function(){p&&t.push("/login")}),[t,p]),Object(J.jsxs)(pe,{children:[Object(J.jsx)("h1",{children:"Register"}),Object(J.jsxs)(le.a,{onSubmit:function(e){var t,n;e.preventDefault(),d((t=c,n=l,function(){var e=Object(V.a)(M.a.mark((function e(r){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:w}),e.next=4,Z.a.post("/api/register",{username:t,password:n});case 4:r({type:R}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:T,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(J.jsxs)(le.a.Group,{controlId:"username",children:[Object(J.jsx)(le.a.Label,{children:"Username"}),Object(J.jsx)(le.a.Control,{required:!0,type:"username",placeholder:"Enter name",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(J.jsxs)(le.a.Group,{controlId:"password",children:[Object(J.jsx)(le.a.Label,{children:"Password"}),Object(J.jsx)(le.a.Control,{required:!0,type:"password",placeholder:"Enter Password",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(J.jsx)(ee.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(J.jsx)(B.a,{className:"py-3",children:Object(J.jsxs)(Q.a,{children:["Have an Account? ",Object(J.jsx)(F.Link,{to:"/login",children:"Sign In"})]})})]})};var xe=function(){return Object(J.jsxs)(F.BrowserRouter,{children:[Object(J.jsx)($,{}),Object(J.jsx)("main",{className:"py-3",children:Object(J.jsxs)(A.a,{children:[Object(J.jsx)(P.d,{path:"/",component:ie,exact:!0}),Object(J.jsx)(P.d,{path:"/reply/:id",component:je}),Object(J.jsx)(P.d,{path:"/create",component:be}),Object(J.jsx)(P.d,{path:"/login",component:he}),Object(J.jsx)(P.d,{path:"/register",component:Oe})]})}),Object(J.jsx)(Y,{})]})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};c.a.render(Object(J.jsx)(G.a,{store:D,children:Object(J.jsx)(xe,{})}),document.getElementById("root")),fe()},77:function(e,t,n){},78:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.caac4219.chunk.js.map